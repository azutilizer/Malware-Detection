import os
import configparser


def create_path(fn):
    def _wrapper(*args, **kwargs):
        result = fn(*args, **kwargs)
        if not os.path.exists(result):
            os.makedirs(result, exist_ok=True)
        return result

    return _wrapper


class Config:
    def __init__(self):
        self.root = os.getcwd() + '/'
        self.parser = configparser.ConfigParser()
        self.parser.read(self.root + 'config.ini')

    @property
    @create_path
    def output_path(self):
        return self.root + parser['PATH']['output']

    @property
    def input_path(self):
        return self.root + parser['PATH']['input']

    @property
    def get_json_data_path(self):
        return self.root + parser['TRAIN']['json_data']

    @property
    def temp_data(self):
        return self.root + parser['TRAIN']['temp_data']

    @property
    def model_directory(self):
        return self.root + parser['TRAIN']['model_data']

    @property
    def training_params(self):
        return self.parser['TRAIN']


config = Config()
parser = config.parser

